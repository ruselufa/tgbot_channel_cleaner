# Telegram Channel Moderator Bot

Бот для модерации комментариев в Telegram-канале с функциями премодерации и автоматической фильтрации негативного контента.

## Возможности

- Премодерация комментариев
- Автоматическое определение негативного контента
- Система предупреждений и банов
- Черный список пользователей
- Статистика модерации
- Логирование всех действий
- Уведомления пользователей о статусе их комментариев

## Требования

- Python 3.8+
- PostgreSQL
- Telegram Bot Token
- Права администратора в канале для бота

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/tgbot_channel_cleaner.git
cd tgbot_channel_cleaner
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте базу данных PostgreSQL:
```sql
CREATE DATABASE tgbot_moderator;
```

5. Скопируйте файл .env.example в .env и заполните необходимые переменные окружения:
```bash
cp .env.example .env
```

## Настройка бота в Telegram

1. Создайте нового бота через @BotFather и получите токен
2. Добавьте бота в ваш канал как администратора со следующими правами:
   - Удаление сообщений
   - Блокировка пользователей
   - Публикация сообщений
3. Создайте отдельный чат для модераторов и добавьте туда бота
4. Получите ID канала и чата модераторов (можно использовать @getidsbot)
5. Укажите полученные ID в файле .env

## Запуск

```bash
python bot.py
```

## Использование

### Команды бота

- `/start` - Начало работы с ботом
- `/stats` - Показать статистику модерации

### Процесс модерации

1. Когда пользователь оставляет комментарий в канале:
   - Бот автоматически проверяет его на негативный контент
   - Если контент определен как негативный, комментарий автоматически отклоняется
   - В противном случае комментарий отправляется на проверку модераторам

2. Модераторы получают уведомление с текстом комментария и кнопками:
   - ✅ Одобрить - комментарий будет опубликован
   - ❌ Отклонить - нужно будет указать причину отклонения

3. Система предупреждений:
   - За негативные комментарии пользователи получают предупреждения
   - После 3 предупреждений пользователь получает временный бан
   - Модераторы могут добавлять пользователей в черный список

## Настройка параметров

Основные параметры можно настроить в файле `config.py`:
- Список запрещенных слов
- Порог негативной тональности
- Количество предупреждений до бана
- Длительность бана
- Тексты сообщений 